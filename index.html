<script src="https://js.monitor.azure.com/scripts/b/ai.2.min.js"></script>
<script>
    var appInsights = window.appInsights || function(config){
        function s(config){t[config] = function(){var i = arguments; t.queue.push(function(){t[config].apply(t,i)})}}
        var t = {config:config}, r = document, f = window, e = "script", o = r.createElement(e), i, u;
        for(o.src=config.url||"https://js.monitor.azure.com/scripts/b/ai.2.min.js",r.getElementsByTagName(e)[0].parentNode.appendChild(o),t.cookie=r.cookie,t.queue=[],i=["Event","Exception","Metric","PageView","Trace","DependencyData","Flush"],u=0;u<i.length;u++)s("track"+i[u]);
        return t
    }({
        instrumentationKey: "uoz45fopfodha5idiip6t3ywzyyk8o48gah5orwf"
    });

    window.appInsights = appInsights;
    appInsights.trackPageView();

    function sendLog(message) {
        appInsights.trackTrace({ message: message });
        console.log("Log sent to Azure Application Insights:", message);
    }
</script>
<script>

document.addEventListener("visibilitychange", function () {
    if (document.hidden) {
        sendLog("This is a free log from Vanilla JS!");
    }
});

</script>
